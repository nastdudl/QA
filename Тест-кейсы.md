# Что есть тест-кейс?
**Тест-кейс** - проверка ПО на выполнение ожидаемых функций.

**Тест-комлект** - совокупность всех тест-кейсов некоторого ПО.

*Тест-кейс можно дословно перевести как тестируемая ситуация.*

**Главной и неотъемлемой частью тест-кейса является ожидаемый результат.**

# Структура тест-кейса
Для нахождения бага помимо ожидаемого результата необходим фактический. Как правило, при тестировании ПО необходима инструкция, как прийти к этому фактическому результату.   

**Пример правильного тест-кейса с картой:** Допустим, тестировщику А. Боброву, который только что начал работать в нашем стартапе www.testshop.rs, дали для исполнения следующий
тест-кейс:    

Шаги:
1. Открой www.main.testshop.rs
2. Введи в поле "Имя пользователя": "testuser1"
3. Введи в поле "Пароль": "pa$$wOrd"
4. Нажми кнопку "Войти"
5. Введи в поле "Поиск": "book117"
6. Нажми кнопку "Найти"
7. Кликни линк "Добавить в корзину"
8. Кликни линк "Корзина"
9. Кликни линк "Оплатить"
10. Выбери из меню "Вид карты": "VISA"
11. Введи в поле "Номер карты": "9999-5148-2222-1277"
12. Введи в поле "Действительна до": "12/07"
13. Введи в поле "CW2": "778"
14. Нажми кнопку "Завершить заказ"
15. Запиши номер заказа __________
16. Запроси базу данных:
select result from cc_transaction where id = <номер заказа >;   
Ожидаемый результат: "10"

Совокупность шагов из примера выше называется **процедурой**.

Исходя из основной компьютерной концепции ВВОД/ВЫВОД:
* шаги - интрукция для ввода
* исполнение шагов - ввод
* ожидаемый результат - ожидаемый вывод
* полученный результат - фактический вывод

**Исполнение тест-кейса завершается сравнением полученного вывода и ожидаемого**

# Полезные атрибуты тест-кейса
## Уникальный ID
ID должен быть уникален не только в рамках содержащего его документа, но и всего департамента качества.

## Приоритет тест-кейса
Это важность тест-кейса. Выражается по шкале от 1 до n, где 1 - наивысший приоритет, n (рацонально использовать 4) - наименьший.

**Пример:** тест-кейс, проверяющий работу кнопки "Купить", будет иметь приоритет 1, а тест-кейс, проверяющий цвет шрифта линка "Гостевая книга", будет 4-го приоритета.

## Идея
Это описание конкретной вещи, проверяемой тест-кейсом. В начале тест-кейса следует написать, что именно проверяется этим тест-кейсом.

## Подготовительная часть
Содержит информацию и данные, которые будут использоваться в реализации тест-кейса.

**Подготовительная часть тест-кейса может включать:**
* данные о существующем аккаунте пользователя или интрукции по созданию нового аккаунта
* другие данные, используемые в тест-кейсе, например реквизиты используемой кредитной карты
* запросы к БД, используемые в тест-кейсе
* комментарии, например о нюансах, которые могут встретиться при исполнении тест-кейса
* другие вещи, облегчающие исполнение и поддержку тест-кейса

Таким образом, подготовительная часть содержит данные, которые потом придется искать при исполнении тест-кейса.

## История редактирования
Для того, чтобы иметь сведения о рождении и истории развития каждого тест-кейса, ведется журнал изменений, где отражено: **Кто? Что? Зачем? Когда? Почему?**

Аттрибуты истории редактирования: 
* **Created on** <date> by <name> - Тест-кейс создан <дата> <кем>
* **Modified on** <date> by <name> — Тест-кейс изменен <дата> <кем>
* **Change** — Что, зачем и почему было изменено. В примерах не печатается само слово "change", а просто
заполняется значение этого атрибута в поле справа от
"Created on..." или "Modified on..."
 
**Пример:**   

![](4cSoDRuLq3Y.jpg)
![](Снимок.PNG)

# Тест-кейсы, управляемые данными
Вид тест-кейса **data-driven (буквально "управляемый данными")** характеризуется разделением и линкованием данных и интрукций по их применению, что дает возможность многократного использования тест-кейса с некоторыми модификациями для различных наборов данных.

 **Например**, изменив в тест-кейсе с картой ID тест-кейса, аттрибуты карты, идею тест-кейса и ожидаемый результат, мы можем с его помощью протестировать оплату картой Master card.

 # Поддерживаемость тест-кейса
 Интерфейс ПО часто изменяется, поэтому каждый раз вносить все изменения в тест-кейсы весьма проблематично.
 
 **Поддерживаемость** - то, насколько легко и просто можно изменить тест-кейс при изменениях в ПО.
 
 **Шаги, повторяющиеся из кейса в кейс, можно вынести во внешний документ и вместо них в тест-кейс внести один шаг-ссылку на этот документ.**
 В таком случае экономится огромное количество времени, так как шаги нужно редактировать только в одном месте.

 Итак, для улучшения поддерживаемости тест-кейса нужно:
 1. Сделать тест-кейс *data-driven*
 2. Не описывать шаги по явно очевидным сценариям (например, логин)
 3. Не давать конкретных деталей, если они не играют роли при исполнении тест-кейса (например, имя товара)
 4. Вынести во внешний документ повторяющиеся сценарии (например, 7 шагов оплаты)
 
 **Пример предыдущего тест-кейса, соответствующего указаниям выше:**
 
![](https://github.com/nastdudl/QA/blob/main/%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B9%20%D1%82%D0%B5%D1%81%D1%82-%D0%BA%D0%B5%D0%B9%D1%81%20pt.1.PNG)
![](https://github.com/nastdudl/QA/blob/main/%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B9%20%D1%82%D0%B5%D1%81%D1%82-%D0%BA%D0%B5%D0%B9%D1%81%20pt.2.PNG)

# Сколько ожидаемых результатов может быть в одном тест-кейсе?
Возможно, что признаком успеха исполнения тест-кейса будет наличие не одного, а двух и более условий одновоременно. Это нормальная практика.

Допустим, что в соответствии с пунктом 12.6 документа "Дизайн кода
для спека #6522" признаком того, что оплата была успешно проведена картой VISA, будет одновременное наличие не одного, а двух
условий:
1. Значение"10" в соответствующейколонкесоответствующей строки в
базе данных.
2. Уменьшение баланса на счете с картой VISA на сумму, равную сумме
оплаты.

![](https://github.com/nastdudl/QA/blob/main/%D1%82%D0%B5%D1%81%D1%82-%D0%BA%D0%B5%D0%B9%D1%81%20%D1%81%20%D0%B4%D0%B2%D1%83%D0%BC%D1%8F%20%D0%9E%D0%A0.PNG)
 
Как будет происходить исполнение этого тест-кейса?      
**Прошли восемь шагов. Остановились. Проверили первый ФР. Затем прошли 9 шаг. Остановились. Проверили второй ФР**
 
Исход исполнения этого тест-кейса будет считаться положительным при одновременной истинности двух условий:
1. ФР после исполнения 8 шага = "10" и
2. ФР после исполнения шага 9 = (*значение из шага 1* - *значение из шага 6*)
 
Можно разбить идею этого тест-кейса на две части и создать 2 отдельных тест-кейса:
1. *IDEA:* "Правильное значение вставляется в базу данных при использовании VISA"
2. *IDEA:* "Верная сумма списывается с баланса карты" 
 
Если есть возможность, так поступить лучше, однако на практике имеет смысл включать в тест-кейс 2 и более ОР так как это экономит рабочее время.
 
**Во многих случаях, когда просится несколько ОР, нужно проверить и фронт, и бэк (веб-страницу и бд).**

# Проблемные тест-кейсы
Недостатки тест-кейсов, от которых нужно избавляться:
* Зависимость тест-кейсов друг от друга
* Нечеткая формулировка шагов
* Нечеткая формулировка идеи и/или ожидаемого результата
 
## 1. Зависимость тест-кейсов друг от друга

**Пример:**
 
**Тест-кейс 1:**   
Шаги:   
 1. Зайти в комнату.
 2. Подойти к стулу.
 3. Открыть **правый** внешний карман рюкзака.
 4. Засунуть руку в **правый** внешний карман рюкзака.
ОР: Граненый стакан
 
 **Тест-кейс 2:**  
 Шаги:   
  1. Зайти в комнату.
  2. Подойти к стулу.
  3. Окрыть **левый** внешний карман рюкзака.
  4. Засунуть руку в **левый** внешний карман рюкзака.
 ОР: Огурец
 
Как видно, шаги 1 и 2 повторяются, однако заменять в тест-кейсе 2 *шаг 1* шагом *см. шаги 1 и 2 из тест-кейса 1* глупо, так как, например, тест-кейс 1 может быть удален за ненадобностью или шаги 1 и 2 в тест-кейсе 1 могут быть переписаны в соответствии с изменением задачи.
 
**Хороший тест-кейс характеризуют:**
* отсутствие ссылок на другие тест-кейсы
* независимость от "следов", оставленных другими тест-кейсами в нашем ПО или БД

**Следовательно, если в документе имеется 10 тест-кейсов, то доказательством независимости каждого из них является то, что их без ущерба для тестирования можно исполнять в любом порядке.**
 
## 2. Нечеткая формулировка шагов
**Перечисляющиеся в тест-кейсе шаги должны быть объективно четкими и ясными**

Необходимо помнить:
* то, что очевидно сейчас, может перестать быть таким очевидным спустя время
* тест-кейс должен быть исполним не только его автором, но и любым другим человеком
 
*Излишняя детализация ведет к усложнению поддерживаемости тест-кейса.*
 
## Нечеткая формулировка идеи тест-кейса и/или ОР
Идея и ОР, так же как и шаги в тест-кейсе, должна быть понятно сформулирована как для автора через год, так и для коллеги.

Что нужно знать относительно идеи и ОР:
* **Не рекомендуется отсылка к внешнему документу**, как это далается в шагах тест-кейса (нет смысла многократно повторять идею тест-кейса и это неудобно)
* Идея - это *объяснение* идеи тест-кейса, она не должна быть пустой или непонятной
* Точность и четкость в формулировке ОР являются основополагающими, так как только при сравнении ОР и ФР можно сделать выводы об исходе тест-кейса
 
# Тест-комлекты
**Совокупность тест-кейсов** (находящихся, как правило, в одном документе) **которые проверяют**
* какую-то определенную часть проекта (например, "Оплату") и/или
* определенный спек (например, спек номер 1455 "Рассылка пользователям писем на основании истории заказов")  

**называют тест-комлектом**.
 
Как это происходит на практике:
* получаем новый спек
* создаем новый файл, в котором создаем новые тест-кейсы для этого нового спека
* исполняем новые тест-кейсы с их одновременной модификацией
* если имеет смысл, переносим тест-кейсы в основной тест-комплект, где хранятся тест-кейсы, проверяющие ту же функциональную часть проекта
 
**Новые тест-кейсы исполняются в первую очередь, поэтому их удобно хранить отдельно от старых.**

**Вот "шапка", которую можно нацепить поверх тест-кейсов.**
 
 <img width="334" alt="Шапка для тест-комплекта" src="https://user-images.githubusercontent.com/62835069/153064527-38bdc0bb-459b-4433-954e-516a16db6baa.PNG">
 
*Author* - автор тест-кейса  
*Spec ID* - номер спека (сам ID должен быть линком к спеку)  
*Priority* - приоритет тест-комплекта, обычно соответствует приоритету спека  
*Producer* - продюсер, написавший спек  
*Developer* - программист, пишущий код в соответствии со спеком  
*Overview* - аналогично идеи тест-кейса  
*GLOBAL SETUP and ADDITIONAL INFO* - аналогично секции тест-кейса SETUP and ADDITIONAL INFO, содержит повторяющиеся вещи, которые используются более чем в одном тест-кейсе, и вообще полезная информация для всего тест-комплекта
 
**Пример:** тест-комплект "Покупка с использованием кредитных карт"
 
<img width="325" alt="тест-комплект 1" src="https://user-images.githubusercontent.com/62835069/153069111-6a8ee6c2-b6fa-474f-902e-a6f5ff1de180.PNG">
 
<img width="334" alt="тест-комплект 2" src="https://user-images.githubusercontent.com/62835069/153069115-6d41d43b-5893-4825-bda4-6a5a53ce62c2.PNG">

